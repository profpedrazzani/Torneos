<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Torneos - TorneoManager Pro</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-light">
    <!-- Top Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="dashboard.html">
                <i class="bi bi-trophy-fill me-2"></i>
                TorneoManager Pro
            </a>
            
            <div class="navbar-nav ms-auto d-flex flex-row align-items-center">
                <!-- Quick Actions -->
                <div class="nav-item dropdown me-3">
                    <button class="btn btn-outline-light btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="bi bi-plus-circle me-1"></i>Crear
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="showCreateTournament()">
                            <i class="bi bi-trophy me-2"></i>Nuevo Torneo
                        </a></li>
                        <li><a class="dropdown-item" href="#" onclick="showImportTournament()">
                            <i class="bi bi-upload me-2"></i>Importar Torneo
                        </a></li>
                    </ul>
                </div>

                <!-- User Menu -->
                <div class="nav-item dropdown">
                    <button class="btn btn-outline-light btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="bi bi-person-circle me-1"></i>Carlos Admin
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="dashboard.html">
                            <i class="bi bi-speedometer2 me-2"></i>Dashboard
                        </a></li>
                        <li><a class="dropdown-item" href="#">
                            <i class="bi bi-person me-2"></i>Mi Perfil
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="index.html">
                            <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesi√≥n
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-white sidebar shadow-sm">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="dashboard.html">
                                <i class="bi bi-speedometer2 me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <i class="bi bi-trophy me-2"></i>Torneos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showSection('teams')">
                                <i class="bi bi-people me-2"></i>Equipos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showSection('matches')">
                                <i class="bi bi-calendar-event me-2"></i>Partidos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showSection('results')">
                                <i class="bi bi-clipboard-data me-2"></i>Resultados
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showSection('standings')">
                                <i class="bi bi-list-ol me-2"></i>Posiciones
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showSection('statistics')">
                                <i class="bi bi-graph-up me-2"></i>Estad√≠sticas
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">
                        <i class="bi bi-trophy me-2"></i>Gesti√≥n de Torneos
                    </h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-primary" onclick="showCreateTournament()">
                                <i class="bi bi-plus-circle me-1"></i>Nuevo Torneo
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="exportTournaments()">
                                <i class="bi bi-download me-1"></i>Exportar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Filters and Search -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="searchTournament" class="form-label">Buscar Torneo</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi bi-search"></i>
                                    </span>
                                    <input type="text" class="form-control" id="searchTournament" placeholder="Nombre del torneo..." onkeyup="filterTournaments()">
                                </div>
                            </div>
                            <div class="col-md-2">
                                <label for="filterStatus" class="form-label">Estado</label>
                                <select class="form-select" id="filterStatus" onchange="filterTournaments()">
                                    <option value="">Todos</option>
                                    <option value="active">Activos</option>
                                    <option value="upcoming">Pr√≥ximos</option>
                                    <option value="finished">Finalizados</option>
                                    <option value="cancelled">Cancelados</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="filterSport" class="form-label">Deporte</label>
                                <select class="form-select" id="filterSport" onchange="filterTournaments()">
                                    <option value="">Todos</option>
                                    <option value="football">F√∫tbol</option>
                                    <option value="basketball">B√°squetbol</option>
                                    <option value="volleyball">Voleibol</option>
                                    <option value="tennis">Tenis</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="filterType" class="form-label">Tipo</label>
                                <select class="form-select" id="filterType" onchange="filterTournaments()">
                                    <option value="">Todos</option>
                                    <option value="league">Liga</option>
                                    <option value="knockout">Eliminaci√≥n</option>
                                    <option value="groups">Grupos</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="sortBy" class="form-label">Ordenar por</label>
                                <select class="form-select" id="sortBy" onchange="sortTournaments()">
                                    <option value="name">Nombre</option>
                                    <option value="date">Fecha</option>
                                    <option value="status">Estado</option>
                                    <option value="teams">Equipos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tournament Stats -->
                <div class="row mb-4">
                    <div class="col-md-3 mb-3">
                        <div class="card bg-primary text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h4 class="mb-0">8</h4>
                                        <p class="mb-0">Total Torneos</p>
                                    </div>
                                    <i class="bi bi-trophy" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card bg-success text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h4 class="mb-0">3</h4>
                                        <p class="mb-0">Activos</p>
                                    </div>
                                    <i class="bi bi-play-circle" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card bg-warning text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h4 class="mb-0">2</h4>
                                        <p class="mb-0">Pr√≥ximos</p>
                                    </div>
                                    <i class="bi bi-clock" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card bg-info text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h4 class="mb-0">3</h4>
                                        <p class="mb-0">Finalizados</p>
                                    </div>
                                    <i class="bi bi-check-circle" style="font-size: 2rem; opacity: 0.7;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tournaments List -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="bi bi-list me-2"></i>Lista de Torneos
                        </h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0" id="tournamentsTable">
                                <thead class="table-light">
                                    <tr>
                                        <th>Torneo</th>
                                        <th>Deporte</th>
                                        <th>Tipo</th>
                                        <th>Equipos</th>
                                        <th>Fechas</th>
                                        <th>Estado</th>
                                        <th>Progreso</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tournamentsTableBody">
                                    <!-- Tournament rows will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <nav aria-label="Tournaments pagination" class="mt-4">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">Anterior</a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Siguiente</a>
                        </li>
                    </ul>
                </nav>
            </main>
        </div>
    </div>

    <!-- Create Tournament Modal -->
    <div class="modal fade" id="createTournamentModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-trophy me-2"></i>Crear Nuevo Torneo
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createTournamentForm">
                        <!-- Step 1: Basic Information -->
                        <div class="step-content active" id="step1">
                            <h6 class="mb-3">
                                <i class="bi bi-info-circle me-2"></i>Informaci√≥n B√°sica
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <label for="tournamentName" class="form-label">Nombre del Torneo *</label>
                                    <input type="text" class="form-control" id="tournamentName" placeholder="Ej: Liga Premier 2024" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="tournamentSport" class="form-label">Deporte *</label>
                                    <select class="form-select" id="tournamentSport" required>
                                        <option value="">Seleccionar...</option>
                                        <option value="football">‚öΩ F√∫tbol</option>
                                        <option value="basketball">üèÄ B√°squetbol</option>
                                        <option value="volleyball">üèê Voleibol</option>
                                        <option value="tennis">üéæ Tenis</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="tournamentType" class="form-label">Tipo de Torneo *</label>
                                    <select class="form-select" id="tournamentType" required onchange="updateTournamentTypeInfo()">
                                        <option value="">Seleccionar...</option>
                                        <option value="league">Liga (Todos contra todos)</option>
                                        <option value="knockout">Eliminaci√≥n directa</option>
                                        <option value="groups">Fase de grupos + Eliminatorias</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="maxTeams" class="form-label">M√°ximo de Equipos *</label>
                                    <select class="form-select" id="maxTeams" required>
                                        <option value="">Seleccionar...</option>
                                        <option value="4">4 equipos</option>
                                        <option value="8">8 equipos</option>
                                        <option value="16">16 equipos</option>
                                        <option value="32">32 equipos</option>
                                        <option value="64">64 equipos</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <div class="alert alert-info" id="tournamentTypeInfo" style="display: none;">
                                        <i class="bi bi-info-circle me-2"></i>
                                        <span id="tournamentTypeDescription"></span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <label for="tournamentDescription" class="form-label">Descripci√≥n</label>
                                    <textarea class="form-control" id="tournamentDescription" rows="3" placeholder="Descripci√≥n del torneo, reglas especiales, premios, etc."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Schedule & Settings -->
                        <div class="step-content" id="step2">
                            <h6 class="mb-3">
                                <i class="bi bi-calendar me-2"></i>Fechas y Configuraci√≥n
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label for="registrationStart" class="form-label">Inicio de Inscripciones</label>
                                    <input type="date" class="form-control" id="registrationStart">
                                </div>
                                <div class="col-md-4">
                                    <label for="registrationEnd" class="form-label">Fin de Inscripciones</label>
                                    <input type="date" class="form-control" id="registrationEnd">
                                </div>
                                <div class="col-md-4">
                                    <label for="tournamentStart" class="form-label">Inicio del Torneo *</label>
                                    <input type="date" class="form-control" id="tournamentStart" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="tournamentEnd" class="form-label">Fin del Torneo</label>
                                    <input type="date" class="form-control" id="tournamentEnd">
                                </div>
                                <div class="col-md-4">
                                    <label for="matchDuration" class="form-label">Duraci√≥n de Partidos (min)</label>
                                    <input type="number" class="form-control" id="matchDuration" placeholder="90" min="30" max="180">
                                </div>
                                <div class="col-md-4">
                                    <label for="venue" class="form-label">Sede Principal</label>
                                    <input type="text" class="form-control" id="venue" placeholder="Estadio Principal">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Configuraci√≥n de Puntos</label>
                                    <div class="row g-2">
                                        <div class="col-4">
                                            <label for="winPoints" class="form-label small">Victoria</label>
                                            <input type="number" class="form-control form-control-sm" id="winPoints" value="3" min="0">
                                        </div>
                                        <div class="col-4">
                                            <label for="drawPoints" class="form-label small">Empate</label>
                                            <input type="number" class="form-control form-control-sm" id="drawPoints" value="1" min="0">
                                        </div>
                                        <div class="col-4">
                                            <label for="lossPoints" class="form-label small">Derrota</label>
                                            <input type="number" class="form-control form-control-sm" id="lossPoints" value="0" min="0">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Opciones Adicionales</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="allowTies">
                                        <label class="form-check-label" for="allowTies">
                                            Permitir empates
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="publicTournament" checked>
                                        <label class="form-check-label" for="publicTournament">
                                            Torneo p√∫blico
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="autoSchedule">
                                        <label class="form-check-label" for="autoSchedule">
                                            Programaci√≥n autom√°tica
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Prizes & Rules -->
                        <div class="step-content" id="step3">
                            <h6 class="mb-3">
                                <i class="bi bi-award me-2"></i>Premios y Reglas
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="firstPrize" class="form-label">Premio 1er Lugar</label>
                                    <input type="text" class="form-control" id="firstPrize" placeholder="$10,000 + Trofeo">
                                </div>
                                <div class="col-md-6">
                                    <label for="secondPrize" class="form-label">Premio 2do Lugar</label>
                                    <input type="text" class="form-control" id="secondPrize" placeholder="$5,000 + Medalla">
                                </div>
                                <div class="col-md-6">
                                    <label for="thirdPrize" class="form-label">Premio 3er Lugar</label>
                                    <input type="text" class="form-control" id="thirdPrize" placeholder="$2,500 + Medalla">
                                </div>
                                <div class="col-md-6">
                                    <label for="registrationFee" class="form-label">Cuota de Inscripci√≥n</label>
                                    <div class="input-group">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control" id="registrationFee" placeholder="500" min="0">
                                    </div>
                                </div>
                                <div class="col-12">
                                    <label for="tournamentRules" class="form-label">Reglas del Torneo</label>
                                    <textarea class="form-control" id="tournamentRules" rows="4" placeholder="Reglas espec√≠ficas del torneo, regulaciones, c√≥digo de conducta, etc."></textarea>
                                </div>
                                <div class="col-12">
                                    <label for="contactInfo" class="form-label">Informaci√≥n de Contacto</label>
                                    <textarea class="form-control" id="contactInfo" rows="2" placeholder="Email: organizador@torneo.com&#10;Tel√©fono: +52 55 1234 5678"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-outline-primary" id="prevStepBtn" onclick="previousStep()" style="display: none;">
                        <i class="bi bi-arrow-left me-2"></i>Anterior
                    </button>
                    <button type="button" class="btn btn-primary" id="nextStepBtn" onclick="nextStep()">
                        Siguiente <i class="bi bi-arrow-right ms-2"></i>
                    </button>
                    <button type="button" class="btn btn-success" id="createBtn" onclick="createTournament()" style="display: none;">
                        <i class="bi bi-check-circle me-2"></i>Crear Torneo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tournament Details Modal -->
    <div class="modal fade" id="tournamentDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tournamentDetailsTitle">
                        <i class="bi bi-trophy me-2"></i>Detalles del Torneo
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="tournamentDetailsBody">
                    <!-- Tournament details will be populated by JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="editTournament()">
                        <i class="bi bi-pencil me-2"></i>Editar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-exclamation-triangle text-warning me-2"></i>Confirmar Eliminaci√≥n
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>¬øEst√°s seguro de que deseas eliminar este torneo?</p>
                    <div class="alert alert-warning">
                        <strong>¬°Atenci√≥n!</strong> Esta acci√≥n no se puede deshacer. Se eliminar√°n todos los datos relacionados incluyendo partidos, resultados y estad√≠sticas.
                    </div>
                    <p><strong>Torneo:</strong> <span id="deleteConfirmTournamentName"></span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                        <i class="bi bi-trash me-2"></i>Eliminar Torneo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample tournament data
        let tournaments = [
            {
                id: 1,
                name: "Liga Premier 2024",
                sport: "football",
                type: "league",
                maxTeams: 16,
                currentTeams: 14,
                startDate: "2024-01-15",
                endDate: "2024-06-30",
                status: "active",
                progress: 65,
                description: "Liga profesional de f√∫tbol",
                venue: "Estadio Nacional",
                prize: "$50,000"
            },
            {
                id: 2,
                name: "Copa Nacional",
                sport: "football",
                type: "knockout",
                maxTeams: 32,
                currentTeams: 28,
                startDate: "2024-02-01",
                endDate: "2024-05-15",
                status: "active",
                progress: 45,
                description: "Copa eliminatoria nacional",
                venue: "M√∫ltiples sedes",
                prize: "$30,000"
            },
            {
                id: 3,
                name: "Torneo Juvenil",
                sport: "football",
                type: "groups",
                maxTeams: 24,
                currentTeams: 24,
                startDate: "2024-03-01",
                endDate: "2024-04-30",
                status: "active",
                progress: 30,
                description: "Torneo para categor√≠as juveniles",
                venue: "Centro Deportivo",
                prize: "$10,000"
            },
            {
                id: 4,
                name: "Liga B√°squetbol Pro",
                sport: "basketball",
                type: "league",
                maxTeams: 12,
                currentTeams: 8,
                startDate: "2024-04-01",
                endDate: "2024-08-31",
                status: "upcoming",
                progress: 0,
                description: "Liga profesional de b√°squetbol",
                venue: "Pabell√≥n Central",
                prize: "$25,000"
            },
            {
                id: 5,
                name: "Copa Voleibol",
                sport: "volleyball",
                type: "knockout",
                maxTeams: 16,
                currentTeams: 12,
                startDate: "2024-05-01",
                endDate: "2024-06-15",
                status: "upcoming",
                progress: 0,
                description: "Copa nacional de voleibol",
                venue: "Gimnasio Municipal",
                prize: "$15,000"
            },
            {
                id: 6,
                name: "Liga Veteranos 2023",
                sport: "football",
                type: "league",
                maxTeams: 20,
                currentTeams: 20,
                startDate: "2023-08-01",
                endDate: "2023-12-15",
                status: "finished",
                progress: 100,
                description: "Liga para jugadores veteranos",
                venue: "Campo Municipal",
                prize: "$20,000"
            },
            {
                id: 7,
                name: "Torneo Tenis Abierto",
                sport: "tennis",
                type: "knockout",
                maxTeams: 64,
                currentTeams: 45,
                startDate: "2023-10-01",
                endDate: "2023-11-30",
                status: "finished",
                progress: 100,
                description: "Torneo abierto de tenis",
                venue: "Club de Tenis",
                prize: "$40,000"
            },
            {
                id: 8,
                name: "Copa Empresarial",
                sport: "football",
                type: "groups",
                maxTeams: 32,
                currentTeams: 18,
                startDate: "2023-09-01",
                endDate: "2023-12-31",
                status: "finished",
                progress: 100,
                description: "Torneo entre empresas",
                venue: "Complejo Deportivo",
                prize: "$35,000"
            }
        ];

        let currentStep = 1;
        let selectedTournamentId = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadTournaments();
        });

        // Load tournaments into table
        function loadTournaments() {
            const tbody = document.getElementById('tournamentsTableBody');
            tbody.innerHTML = '';

            tournaments.forEach(tournament => {
                const row = createTournamentRow(tournament);
                tbody.appendChild(row);
            });
        }

        // Create tournament table row
        function createTournamentRow(tournament) {
            const row = document.createElement('tr');
            row.setAttribute('data-tournament-id', tournament.id);
            
            const statusBadge = getStatusBadge(tournament.status);
            const sportIcon = getSportIcon(tournament.sport);
            const typeText = getTypeText(tournament.type);
            
            row.innerHTML = `
                <td>
                    <div class="d-flex align-items-center">
                        <div class="me-3">${sportIcon}</div>
                        <div>
                            <h6 class="mb-0">${tournament.name}</h6>
                            <small class="text-muted">${tournament.description}</small>
                        </div>
                    </div>
                </td>
                <td>
                    <span class="badge bg-light text-dark">${getSportName(tournament.sport)}</span>
                </td>
                <td>${typeText}</td>
                <td>
                    <span class="badge bg-info">${tournament.currentTeams}/${tournament.maxTeams}</span>
                </td>
                <td>
                    <small class="text-muted">
                        <i class="bi bi-calendar me-1"></i>${formatDate(tournament.startDate)}<br>
                        <i class="bi bi-calendar-check me-1"></i>${formatDate(tournament.endDate)}
                    </small>
                </td>
                <td>${statusBadge}</td>
                <td>
                    <div class="progress" style="height: 20px;">
                        <div class="progress-bar ${getProgressBarClass(tournament.status)}" 
                             style="width: ${tournament.progress}%">
                            ${tournament.progress}%
                        </div>
                    </div>
                </td>
                <td>
                    <div class="btn-group btn-group-sm">
                        <button class="btn btn-outline-primary" onclick="viewTournament(${tournament.id})" title="Ver detalles">
                            <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-outline-secondary" onclick="editTournament(${tournament.id})" title="Editar">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn btn-outline-success" onclick="manageTournament(${tournament.id})" title="Gestionar">
                            <i class="bi bi-gear"></i>
                        </button>
                        <button class="btn btn-outline-danger" onclick="deleteTournament(${tournament.id})" title="Eliminar">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </td>
            `;
            
            return row;
        }

        // Helper functions
        function getStatusBadge(status) {
            const badges = {
                'active': '<span class="badge bg-success">Activo</span>',
                'upcoming': '<span class="badge bg-warning">Pr√≥ximo</span>',
                'finished': '<span class="badge bg-secondary">Finalizado</span>',
                'cancelled': '<span class="badge bg-danger">Cancelado</span>'
            };
            return badges[status] || '<span class="badge bg-light text-dark">Desconocido</span>';
        }

        function getSportIcon(sport) {
            const icons = {
                'football': '‚öΩ',
                'basketball': 'üèÄ',
                'volleyball': 'üèê',
                'tennis': 'üéæ'
            };
            return icons[sport] || 'üèÜ';
        }

        function getSportName(sport) {
            const names = {
                'football': 'F√∫tbol',
                'basketball': 'B√°squetbol',
                'volleyball': 'Voleibol',
                'tennis': 'Tenis'
            };
            return names[sport] || 'Otro';
        }

        function getTypeText(type) {
            const types = {
                'league': 'Liga',
                'knockout': 'Eliminaci√≥n',
                'groups': 'Grupos'
            };
            return types[type] || 'Otro';
        }

        function getProgressBarClass(status) {
            const classes = {
                'active': 'bg-success',
                'upcoming': 'bg-warning',
                'finished': 'bg-info',
                'cancelled': 'bg-danger'
            };
            return classes[status] || 'bg-secondary';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric' 
            });
        }

        // Filter and search functions
        function filterTournaments() {
            const searchTerm = document.getElementById('searchTournament').value.toLowerCase();
            const statusFilter = document.getElementById('filterStatus').value;
            const sportFilter = document.getElementById('filterSport').value;
            const typeFilter = document.getElementById('filterType').value;

            const filteredTournaments = tournaments.filter(tournament => {
                const matchesSearch = tournament.name.toLowerCase().includes(searchTerm) ||
                                    tournament.description.toLowerCase().includes(searchTerm);
                const matchesStatus = !statusFilter || tournament.status === statusFilter;
                const matchesSport = !sportFilter || tournament.sport === sportFilter;
                const matchesType = !typeFilter || tournament.type === typeFilter;

                return matchesSearch && matchesStatus && matchesSport && matchesType;
            });

            displayFilteredTournaments(filteredTournaments);
        }

        function displayFilteredTournaments(filteredTournaments) {
            const tbody = document.getElementById('tournamentsTableBody');
            tbody.innerHTML = '';

            filteredTournaments.forEach(tournament => {
                const row = createTournamentRow(tournament);
                tbody.appendChild(row);
            });
        }

        function sortTournaments() {
            const sortBy = document.getElementById('sortBy').value;
            
            tournaments.sort((a, b) => {
                switch(sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'date':
                        return new Date(a.startDate) - new Date(b.startDate);
                    case 'status':
                        return a.status.localeCompare(b.status);
                    case 'teams':
                        return b.currentTeams - a.currentTeams;
                    default:
                        return 0;
                }
            });

            loadTournaments();
        }

        // Modal functions
        function showCreateTournament() {
            currentStep = 1;
            updateStepDisplay();
            const modal = new bootstrap.Modal(document.getElementById('createTournamentModal'));
            modal.show();
        }

        function showImportTournament() {
            alert('Funci√≥n de importaci√≥n de torneos...\n(Permitir√≠a importar torneos desde archivos CSV, Excel, etc.)');
        }

        // Step navigation
        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < 3) {
                    currentStep++;
                    updateStepDisplay();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(`step${currentStep}`).classList.add('active');
            
            // Update buttons
            const prevBtn = document.getElementById('prevStepBtn');
            const nextBtn = document.getElementById('nextStepBtn');
            const createBtn = document.getElementById('createBtn');
            
            if (currentStep === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'inline-block';
            }
            
            if (currentStep === 3) {
                nextBtn.style.display = 'none';
                createBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                createBtn.style.display = 'none';
            }
        }

        function validateCurrentStep() {
            const currentStepElement = document.getElementById(`step${currentStep}`);
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('is-invalid');
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                    field.classList.add('is-valid');
                }
            });

            return isValid;
        }

        function updateTournamentTypeInfo() {
            const type = document.getElementById('tournamentType').value;
            const infoDiv = document.getElementById('tournamentTypeInfo');
            const descriptionSpan = document.getElementById('tournamentTypeDescription');
            
            const descriptions = {
                'league': 'Todos los equipos juegan entre s√≠. El equipo con m√°s puntos gana.',
                'knockout': 'Eliminaci√≥n directa. Los equipos son eliminados tras perder un partido.',
                'groups': 'Fase de grupos seguida de eliminatorias. Combina ambos sistemas.'
            };
            
            if (type && descriptions[type]) {
                descriptionSpan.textContent = descriptions[type];
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        // Tournament actions
        function createTournament() {
            if (!validateCurrentStep()) {
                return;
            }

            const formData = {
                name: document.getElementById('tournamentName').value,
                sport: document.getElementById('tournamentSport').value,
                type: document.getElementById('tournamentType').value,
                maxTeams: parseInt(document.getElementById('maxTeams').value),
                description: document.getElementById('tournamentDescription').value,
                startDate: document.getElementById('tournamentStart').value,
                endDate: document.getElementById('tournamentEnd').value,
                venue: document.getElementById('venue').value,
                prize: document.getElementById('firstPrize').value
            };

            // Simulate tournament creation
            const newTournament = {
                id: tournaments.length + 1,
                ...formData,
                currentTeams: 0,
                status: 'upcoming',
                progress: 0
            };

            tournaments.unshift(newTournament);
            loadTournaments();

            // Close modal and reset form
            const modal = bootstrap.Modal.getInstance(document.getElementById('createTournamentModal'));
            modal.hide();
            document.getElementById('createTournamentForm').reset();

            alert(`¬°Torneo "${formData.name}" creado exitosamente!`);
        }

        function viewTournament(id) {
            const tournament = tournaments.find(t => t.id === id);
            if (!tournament) return;

            const modal = new bootstrap.Modal(document.getElementById('tournamentDetailsModal'));
            document.getElementById('tournamentDetailsTitle').innerHTML = 
                `<i class="bi bi-trophy me-2"></i>${tournament.name}`;
            
            document.getElementById('tournamentDetailsBody').innerHTML = `
                <div class="row g-3">
                    <div class="col-md-6">
                        <h6>Informaci√≥n General</h6>
                        <p><strong>Deporte:</strong> ${getSportName(tournament.sport)}</p>
                        <p><strong>Tipo:</strong> ${getTypeText(tournament.type)}</p>
                        <p><strong>Equipos:</strong> ${tournament.currentTeams}/${tournament.maxTeams}</p>
                        <p><strong>Estado:</strong> ${getStatusBadge(tournament.status)}</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Fechas</h6>
                        <p><strong>Inicio:</strong> ${formatDate(tournament.startDate)}</p>
                        <p><strong>Fin:</strong> ${formatDate(tournament.endDate)}</p>
                        <p><strong>Sede:</strong> ${tournament.venue || 'No especificada'}</p>
                        <p><strong>Premio:</strong> ${tournament.prize || 'No especificado'}</p>
                    </div>
                    <div class="col-12">
                        <h6>Descripci√≥n</h6>
                        <p>${tournament.description}</p>
                    </div>
                    <div class="col-12">
                        <h6>Progreso</h6>
                        <div class="progress" style="height: 25px;">
                            <div class="progress-bar ${getProgressBarClass(tournament.status)}" 
                                 style="width: ${tournament.progress}%">
                                ${tournament.progress}%
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.show();
        }

        function editTournament(id) {
            alert(`Editando torneo ID: ${id}\n(En la implementaci√≥n completa, esto abrir√≠a el formulario de edici√≥n con los datos precargados)`);
        }

        function manageTournament(id) {
            const tournament = tournaments.find(t => t.id === id);
            alert(`Gestionando torneo: ${tournament.name}\n(Esto abrir√≠a el panel de gesti√≥n completo con equipos, partidos, resultados, etc.)`);
        }

        function deleteTournament(id) {
            const tournament = tournaments.find(t => t.id === id);
            if (!tournament) return;

            selectedTournamentId = id;
            document.getElementById('deleteConfirmTournamentName').textContent = tournament.name;
            
            const modal = new bootstrap.Modal(document.getElementById('deleteConfirmModal'));
            modal.show();
        }

        function confirmDelete() {
            if (selectedTournamentId) {
                tournaments = tournaments.filter(t => t.id !== selectedTournamentId);
                loadTournaments();
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('deleteConfirmModal'));
                modal.hide();
                
                alert('Torneo eliminado exitosamente');
                selectedTournamentId = null;
            }
        }

        // Export function
        function exportTournaments() {
            alert('Exportando lista de torneos...\n(En la implementaci√≥n real, esto generar√≠a un archivo CSV o Excel con todos los datos de los torneos)');
        }

        // Navigation function
        function showSection(section) {
            alert(`Navegando a la secci√≥n: ${section}\n(En la implementaci√≥n completa, esto cargar√≠a la p√°gina correspondiente)`);
        }
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
        }

        .sidebar .nav-link {
            font-weight: 500;
            color: #333;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            margin: 0.125rem 0.5rem;
            transition: all 0.15s ease-in-out;
        }

        .sidebar .nav-link:hover {
            color: #0d6efd;
            background-color: rgba(13, 110, 253, 0.1);
        }

        .sidebar .nav-link.active {
            color: #0d6efd;
            background-color: rgba(13, 110, 253, 0.1);
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .table th {
            border-top: none;
            font-weight: 600;
            color: #495057;
            background-color: #f8f9fa;
        }

        .table td {
            vertical-align: middle;
        }

        .progress {
            background-color: #e9ecef;
        }

        .card {
            border: none;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }

        .btn-group-sm > .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }

        .badge {
            font-size: 0.75em;
        }

        .modal-xl {
            max-width: 1140px;
        }

        @media (max-width: 767.98px) {
            .sidebar {
                top: 5rem;
                padding-top: 0;
            }
            
            .table-responsive {
                font-size: 0.875rem;
            }
            
            .btn-group-sm > .btn {
                padding: 0.125rem 0.25rem;
                font-size: 0.75rem;
            }
        }
    </style>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9826b53a044e1e9a',t:'MTc1ODQyNzc3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>